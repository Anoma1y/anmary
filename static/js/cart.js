"use strict";var addToCartBtn=document.getElementById("detail-add-to-cart"),productId=document.getElementById("detail-product-id"),errorText=document.getElementById("detail-product-error"),deleteFromCartBtn=document.getElementsByClassName("cart-delete-item"),selectedProductSize=document.getElementsByClassName("size-item"),id=void 0!=productId?productId.innerText:void 0,currentProductSize=void 0;0!=selectedProductSize.length&&(currentProductSize=!0===selectedProductSize[0].checked?selectedProductSize[0].innerText:void 0);function getCurrentSize(t){var e=document.getElementsByClassName(t),r=[],o=!0,n=!1,a=void 0;try{for(var i,d=e[Symbol.iterator]();!(o=(i=d.next()).done);o=!0){var c=i.value;c.checked&&r.push(c.innerText)}}catch(t){n=!0,a=t}finally{try{!o&&d.return&&d.return()}finally{if(n)throw a}}return r.length>0?r:null}function errorSet(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.innerText=e.length>0?e:""}function getSpan(t,e){var r=!0,o=!1,n=void 0;try{for(var a,i=t.childNodes[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var d=a.value,c=e.toUpperCase();if(d.nodeName==c)return d}}catch(t){o=!0,n=t}finally{try{!r&&i.return&&i.return()}finally{if(o)throw n}}}if(selectedProductSize){var _iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _step3,_loop=function(){var t=_step3.value;t.control.addEventListener("change",function(e){currentProductSize=!0===e.target.checked?e.target.labels[0].innerText:null,t.control.classList.contains("item_in_cart")?(addToCartBtn.classList.add("in-cart"),getSpan(addToCartBtn,"span").innerText="Удалить из корзины"):(addToCartBtn.classList.remove("in-cart"),getSpan(addToCartBtn,"span").innerText="Добавить в корзину")})},_iterator3=selectedProductSize[Symbol.iterator]();!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0)_loop()}catch(t){_didIteratorError3=!0,_iteratorError3=t}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}}if(addToCartBtn)try{addToCartBtn.addEventListener("click",function(){null!=currentProductSize?addToCartBtn.classList.contains("in-cart")?$.ajax({url:"../cart/deleteProductInCart",type:"POST",data:{id:id,size:currentProductSize}}).done(function(){window.location.reload()}).fail(function(){errorSet(errorText,"Ошибка при удалении из корзины")}):$.ajax({url:"../cart/addProduct",type:"POST",data:{id:id,size:currentProductSize}}).done(function(){window.location.reload()}).fail(function(){errorSet(errorText,"Ошибка добавления в корзину")}):errorSet(errorText,"Выберите размер")})}catch(t){errorSet(errorText,"Ошибка")}if(deleteFromCartBtn)try{for(var i=0;i<deleteFromCartBtn.length;i++)deleteFromCartBtn[i].addEventListener("click",function(t){var e=t.target.dataset,r=e.id,o=e.size;$.ajax({url:"../cart/deleteProductInCart",type:"POST",data:{id:r,size:o}}).done(function(){window.location.reload()}).fail(function(){console.log("error")})})}catch(t){console.log(t)}