"use strict";var productData=[],url="admin/getAllProducts",sortingProduct=document.getElementsByClassName("sortingProduct");function ajax(t,e){var r=new XMLHttpRequest;return new Promise(function(o,n){r.open(t,e,!0),r.send(),r.onload=function(){if(r.status>=200&&r.status<300){var t=JSON.parse(r.responseText);productData=Array.prototype.slice.call(t),o(t)}else n({status:r.status,statusText:r.statusText})},r.onerror=function(){n({status:r.status,statusText:r.statusText})}})}window.onload=ajax("GET",url).then(function(t){getProduct(t)}).catch(function(){console.log("Error")});var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=sortingProduct[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var sorting=_step.value;sorting.addEventListener("click",function(t){var e=t.target.id.split("-")[1];t.target.classList.toggle("activeDesc");var r=!1;void 0!==t.target.classList[1]&&(r=!0),getProduct(productData,e,r)},!1)}}catch(t){_didIteratorError=!0,_iteratorError=t}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}function getProduct(t){var e,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=(e=o,r=n,t.sort(function(t,o){return"id"!=e&&"price"!=e&&"sale_price"!=e&&"percentSale"!=e?r?t[e].localeCompare(o[e]):o[e].localeCompare(t[e]):(t[e]=parseInt(t[e]),o[e]=parseInt(o[e]),t[e]<o[e]?!0===r?-1:1:t[e]>o[e]?!0===r?1:-1:void 0)}),!0),i=document.getElementById("tbody");if(a){i.innerHTML="";var s=function(e){var r=document.createElement("tr");for(d=0;d<Object.keys(t[e]).length;d++){var o=document.createElement("td");"is_availability"===Object.keys(t[e])[d]||"is_sale"===Object.keys(t[e])[d]?o.textContent=1==t[e][Object.keys(t[e])[d]]?"Да":"Нет":o.textContent=t[e][Object.keys(t[e])[d]],r.appendChild(o)}var n=document.createElement("td");n.className="tdBtnEdit",n.onclick=function(){return editItem(t[e].id)},n.textContent="Изменить",r.appendChild(n);var a=document.createElement("td");a.className="tdBtnDelete",a.onclick=function(){return deleteItem(t[e].id)},a.textContent="Удалить",r.appendChild(a),i.appendChild(r)};for(var c in t){var d;s(c)}}}function deleteItem(t){!0===confirm("Подтвердите удаление")&&(window.location="admin/delete/"+t)}function editItem(t){window.location="admin/edit/"+t}